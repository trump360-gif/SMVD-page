# News & Event DB 마이그레이션 계획

> 작성일: 2026-02-21
> 카테고리: 4개 (Notice, Event, Lecture, Exhibition)

---

## 1. 카테고리 체계

| 카테고리 | 설명 | 게시물 수 |
|---------|------|----------|
| `Notice` | 공지사항, 학생경비 집행내역, 졸업안내 | 15개 |
| `Event` | 동문의 밤, 과의 밤, 과제전 등 행사 | 4개 |
| `Lecture` | 방학특강, 동문강연, 진로특강, 수업내특강 | 9개 |
| `Exhibition` | 졸업전시회, 캠퍼스사업 프레젠테이션 | 2개 |
| **총합** | | **30개** (졸업전시회 기존 1개 포함) |

---

## 2. 그룹 A: 기존 DB 게시물 업데이트 (9개)

> DB에 이미 존재 → content/category/날짜 업데이트

### A-1. 본문 추가 필요 (1개)

| slug | 현재 제목 | 작업 | category 변경 |
|------|----------|------|--------------|
| 6 | 2024 시각·영상디자인과 동문의 밤 | content 추가 (본문+이미지10장) | Event (유지) |

**동문의 밤 content (Tiptap JSON):**
```
- 날짜: 2024-10-28
- 장소: 백주년기념관 한상은 라운지
- 1부: 동문 특강 — 학문적 교류와 협력의 장
- 2부: 황순선 교수님 서프라이즈 퇴임식 — 30년 헌신에 감사
- "동문과 재학생이 함께하며 서로의 열정과 목표를 나누고, 시간의 경계를 넘어 소통을 이어갈 수 있는 뜻 깊은 시간"
- 이미지 10장 (원본 사이트에서 다운로드 필요)
```

### A-2. 학생경비 게시물 (7개) — 첨부파일 링크만 추가

| slug | 현재 제목 | 작업 |
|------|----------|------|
| 1 | 미술대학 2024년도 학생경비 | attachments에 .xlsx URL 추가 |
| 2 | 디자인학과(박사) 2024년도 학생경비 | attachments에 .xlsx URL 추가 |
| 3 | 시각영상디자인학과(석사) 2024년도 학생경비 | attachments에 .xlsx URL 추가 |
| 4 | 시각영상디자인학과 2024년도 학생경비 | attachments에 .xlsx URL 추가 |
| 7 | 학생경비 집행 내역 (종합) | content에 이미지 1장 추가 |
| 8 | (박사) 2023 학생경비 | attachments에 .xlsx URL 추가 |
| 9 | (석사) 2023 학생경비 | attachments에 .xlsx URL 추가 |

### A-3. 공지 본문 추가 (1개)

| slug | 현재 제목 | 작업 |
|------|----------|------|
| 10 | [졸업] 재학생 졸업학점 이수현황 | content 추가 (안내 텍스트+첨부파일) |

---

## 3. 그룹 B: 신규 게시물 생성 (21개)

### B-1. Event (2개)

| # | 제목 | 날짜 | 이미지 | 원본 URL |
|---|------|------|--------|---------|
| 1 | 제 7회 시각영상디자인과의 밤 | 2022-12-14 | 6장 | ?p=2069 |
| 2 | 제4회 시각・영상디자인과의 밤 | 2019-12-03 | 3장 | ?p=620 |

### B-2. Lecture (9개)

| # | 제목 | 날짜 | 이미지 | 원본 URL |
|---|------|------|--------|---------|
| 1 | 2022-2 겨울방학 특강 | 2023-01-30 | 4장 | ?p=2077 |
| 2 | 2022-1 여름방학 특강 | 2022-07-21 | 5장 | ?p=2056 |
| 3 | 2020-1 여름방학 특강 | 2020-08-03 | 1장 | ?p=1186 |
| 4 | 시각영상디자인과 장다윤 선생님 특강 | 2021-06-04 | 0장 | ?p=1734 |
| 5 | 숙명적 디자인 마중 : 강지연 동문 | 2021-05-28 | 0장 | ?p=1729 |
| 6 | 숙명적 디자인 마중 : 김효영 동문 | 2021-05-21 | 0장 | ?p=1722 |
| 7 | 2020-2 숙명행복 전임교수 진로특강 | 2020-09-21 | 5장 | ?p=1216 |
| 8 | 2020-1 전공별 여대생 특성화 프로그램 | 2020-05-22 | 6장 | ?p=1316 |
| 9 | 디자인씽킹앤시각화 수업 내 특강 | 2020-06-09 | 2장 | ?p=793 |

### B-3. Exhibition (1개)

| # | 제목 | 날짜 | 이미지 | 원본 URL |
|---|------|------|--------|---------|
| 1 | 2020-1 플래티셔일러스트레이션 캠퍼스 사업 프레젠테이션 | 2020-06-25 | 2장 | ?p=809 |

### B-4. Notice — 학생경비 (7개)

| # | 제목 | 연도 | 과정 | 원본 URL |
|---|------|------|------|---------|
| 1 | 시각영상디자인과 2023년도 학생경비 집행내역 공개 | 2023 | 학부 | ?p=2835 |
| 2 | 디자인학과(박사) 2022 학생경비집행내역 공개 | 2022 | 박사 | ?p=2106 |
| 3 | 시각영상디자인학과(석사) 2022 학생경비집행내역 공개 | 2022 | 석사 | ?p=2103 |
| 4 | 시각영상디자인과 2022년도 학생경비 집행내역 공개 | 2022 | 학부 | ?p=2100 |
| 5 | 시각영상디자인학과(석사) 2021 학생경비집행내역 공개 | 2021 | 석사 | ?p=2041 |
| 6 | 시각영상디자인과 2021년도 학생경비 집행내역 공개 | 2021 | 학부 | ?p=2035 |
| 7 | 시각영상디자인과 2020학년도 학생경비 집행내역_학부 | 2020 | 학부 | ?p=1685 |

### B-5. Notice — 기타 (1개)

| # | 제목 | 원본 URL |
|---|------|---------|
| 1 | 시각영상디자인과 2020학년도 학생경비 집행내역_박사 | ?p=1714 |

> 참고: 2020년도 학생경비는 .xlsx가 아닌 이미지(.png, .jpg)로만 제공

---

## 4. 실행 순서

### Step 1: Prisma 스키마 확인
- category 주석 업데이트: `'Notice', 'Event', 'Lecture', 'Exhibition'`
- 스키마 변경 불필요 (category는 이미 String 타입)

### Step 2: 기존 게시물 업데이트 (그룹 A)
```
A-1: 동문의 밤 → content + publishedAt 업데이트
A-2: 학생경비 7개 → attachments 업데이트
A-3: 졸업학점 → content 업데이트
```

### Step 3: 신규 게시물 생성 (그룹 B)
```
B-1: Event 2개
B-2: Lecture 9개
B-3: Exhibition 1개
B-4: Notice (학생경비) 7개
B-5: Notice (기타) 1개
총 21개 INSERT
```

### Step 4: 이미지 처리
- 이미지가 있는 게시물: ~15개 (총 ~50장)
- 방법 1: 원본 URL 직접 참조 (빠르지만 외부 의존)
- 방법 2: 다운로드 → public/images/news/ 저장 (안정적)
- **권장: 방법 2** (원본 사이트 폐쇄 시 대비)

### Step 5: slug 체계 정비
- 현재: 숫자 ('1'~'10')
- 신규: 의미있는 slug 사용
  - 예: `2024-alumni-night`, `7th-department-night`, `2022-winter-lecture`

### Step 6: publishedAt 날짜 정비
- 현재: 모든 게시물이 2025-01-05 (동일)
- 수정: 각 게시물의 실제 날짜로 업데이트

---

## 5. content JSON 구조 (Tiptap 형식)

### 본문이 있는 게시물 (이벤트/특강)
```json
{
  "type": "doc",
  "content": [
    {
      "type": "paragraph",
      "content": [{ "type": "text", "text": "본문 텍스트..." }]
    },
    {
      "type": "image",
      "attrs": { "src": "/images/news/파일명.jpg", "alt": "설명" }
    }
  ]
}
```

### 학생경비 게시물 (첨부파일만)
```json
// content: null
// attachments:
[
  {
    "id": "cuid",
    "filename": "2024_학생경비집행내역.xlsx",
    "filepath": "/attachments/news/2024_학생경비집행내역.xlsx",
    "mimeType": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
    "size": 0,
    "uploadedAt": "2025-01-05T00:00:00.000Z"
  }
]
```

---

## 6. 작업 예상 시간

| 단계 | 시간 |
|------|------|
| Step 1: 스키마 확인 | 2분 |
| Step 2: 기존 업데이트 (9개) | 15분 |
| Step 3: 신규 생성 (21개) | 30분 |
| Step 4: 이미지 다운로드 (~50장) | 20분 |
| Step 5-6: slug + 날짜 정비 | 10분 |
| 검증 | 10분 |
| **총합** | **~90분** |
